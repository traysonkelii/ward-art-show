<!DOCTYPE html>
<html>

<head>
  <!-- <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script> -->
  <!-- we import arjs version without NFT but with marker + location based support -->
  <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
  <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
</head>


<body style="margin : 0px; overflow: hidden;">
  <a-scene embedded arjs>
    <a-marker type="pattern" preset="custom" url="pattern-art2_code.patt">
      <!-- we use cors proxy to avoid cross-origin problems -->
      <!--
          ⚠️⚠️⚠️
          https://arjs-cors-proxy.herokuapp.com/ is now offline, Heroku has dismissed all his free plans from November 2022.
          You need to host your own proxy and use it instead. The proxy is based on CORS Anywhere (see https://github.com/Rob--W/cors-anywhere).
          ⚠️⚠️⚠️
        -->
      <!-- <a-entity id="earth" position="0 0 -5" scale="1 1 1" gltf-model="./earth/scene.gltf"></a-entity> -->

      <!-- <a-assets>
        <a-asset-item id="earth-gltf" src="./earth/scene.gltf"></a-asset-item>
      </a-assets> -->

      <a-entity id="earth" gltf-model="./earth/scene.gltf" position="0 1 0" rotation="0 180 0" scale="0.5 0.5 0.5"></a-entity>


    </a-marker>
    <!-- <a-entity camera></a-entity> -->
  </a-scene>
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      let earth = document.querySelector('#earth');
      let touchStart = { x: 0, y: 0 };
      let rotation = { x: 0, y: 0 };

      earth.addEventListener('touchstart', (event) => {
        touchStart.x = event.touches[0].clientX;
        touchStart.y = event.touches[0].clientY;
      });

      earth.addEventListener('touchmove', (event) => {
        let deltaX = event.touches[0].clientX - touchStart.x;
        let deltaY = event.touches[0].clientY - touchStart.y;

        rotation.x = deltaY * 0.25;
        rotation.y = deltaX * 0.25;

        earth.setAttribute('rotation', {
          x: rotation.x,
          y: earth.getAttribute('rotation').y + rotation.y,
          z: 0,
        });
      });

      earth.addEventListener('touchend', (event) => {
        touchStart = { x: 0, y: 0 };
      });
    });
  </script>
  <!-- <script>
    // Get the <a-entity> tag for the model
    const modelEntity = document.querySelector('#earth-gltf');

    // Set the initial rotation of the model
    let rotation = { x: 180, y: 0, z: 0 };
    modelEntity.setAttribute('rotation', rotation);

    // Set the rotation speed (in degrees per second)
    const rotationSpeed = 30;

    // Update the rotation of the model every 10 milliseconds
    setInterval(() => {
      // Calculate the new rotation values based on the time elapsed
      const timeElapsed = performance.now() / 1000; // Convert to seconds
      rotation.y = rotationSpeed * timeElapsed % 360; // Keep rotation within 0-360 degrees
      // rotation.z = rotationSpeed * timeElapsed % 360; // Keep rotation within 0-360 degrees

      // Update the rotation of the <a-entity> tag
      modelEntity.setAttribute('rotation', rotation);
    }, 10);
  </script> -->
</body>

</html>